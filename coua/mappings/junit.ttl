# RML mappings for junit.xml

@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://w3id.org/rml/> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix coua: <https://gitlab.dlr.de/ft-ssy-avs/ap/coua/schema#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix junit: <https://#> .
@base <https://example.com/schema#> .


<#TriplesMap> a rr:TriplesMap ;
	rml:logicalSource [
		# May be overridden using file_path config option of morph-kgc
		rml:source "junit.xml" ;
		rml:refereceFormulation ql:XPath ;
		rml:iterator "/testsuites/descendant::testsuite/testcase"
	] .

<#TriplesMap> rr:subjectMap [
	rr:template "https://llg.cubic.org/docs/junit#{@name}"
] .

<#TriplesMap> rr:predicateObjectMap [
	rr:predicate rdf:type ;
	rr:objectMap [
		rr:constant coua:TestCase
	]
] .

<#TriplesMap> rr:predicateObjectMap [
	rr:predicate coua:classname ;
	rr:objectMap [
		rml:reference "classname" ;
		rr:termType rml:Literal
	]
] .

<#TriplesMap> rr:predicateObjectMap [
	rr:predicate coua:timestamp ;
	rr:objectMap [
		rml:reference "timestamp" ;
		rr:termType rml:Literal
	]
] .

<#TriplesMap> rr:predicateObjectMap [
	rr:predicate coua:time ;
	rr:objectMap [
		rml:reference "time" ;
		rr:termType rml:Literal
	]
] .

<#TriplesMap> rml:predicateObjectMap [
	rr:predicate coua:failureType ;
	rr:objectMap [
		rml:reference "failure/@type" ;
		rr:termType rml:Literal
	]
] .

# Text of the failure (e.g. output of cargo with panic at line ...)
<#TriplesMap> rml:predicateObjectMap [
	rr:predicate coua:testFailureDescription ;
	rr:objectMap [
		rml:reference "failure" ;
		rr:termType rml:Literal
	]
] .

# TODO import system-out, system-err?
